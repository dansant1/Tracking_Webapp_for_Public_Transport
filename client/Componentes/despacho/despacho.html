<template name="VistaDespacho">
    <div class="page-header clearfix" style="margin-top: 0px">
        <h4 class="pull-left">Despacho de Veh√≠culos</h4>
    </div>
    <div class="row">
      <div class="col-md-9">
        <a href="/planeamiento/{{rutaId}}/nuevo" class="btn btn-success">Agregar Planeamiento de Hoy de Ida</a>

        <a href="/planeamiento/{{rutaId}}/nuevo/vuelta" class="btn btn-primary">Agregar Planeamiento de Hoy de Vuelta</a>
      </div>
    </div>

    <br><br>
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#home">Flota</a></li>
        <li><a data-toggle="tab" href="#menu1">Vehiculos Despachados</a></li>
        <li><a data-toggle="tab" href="#menu2">Vehiculos en Espera</a></li>
        <li><a data-toggle="tab" href="#menu3">Vehiculos Sancionados</a></li>
    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
            <h3>Lista de Vehiculos a Despachar</h3>
            <br>
            <ul>
                {{#each despacho}}
                    <li class="list-group-item clearfix horario planeamiento">
                        <div class="pull-left" style="width: 75%; margin-left: 10px">
                            <span class="time hour">{{this.hora}}</span>
                            <i class="fa fa-clock-o" aria-hidden="true"></i>
                            {{#with vehiculo}}
                                <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">Placa {{this.placa}}
                                    - Padron {{this.padron}}</span>
                            {{/with}}
                        </div>
                        <div class="pull-right">
                            <div class="form-group"
                                 style="display: inline-block; margin-left: 10px; margin-right: 15px">
                                {{#if this.ida}}
                                    <span style="display: inline-block; margin-left: 0px; color: blue;">VUELTA</span>
                                {{else}}
                                    <span style="display: inline-block; margin-left: 0px; color: red">IDA</span>
                                {{/if}}
                            </div>
                            {{#if this.despachado}}
                                <button type="button" class="btn btn-warning">Despachado</button>
                            {{else}}
                                <button type="button" class="despachar btn btn-warning">Asignar Personal</button>
                            {{/if}}
                        </div>
                    </li>
                {{/each}}
            </ul>
        </div>
        <div id="menu1" class="tab-pane fade">
            <h3>Vehiculos Programados</h3>
            <br><br>
            {{#each despachados}}
                <li class="list-group-item clearfix horario planeamiento">
          <span class="pull-left" style="width: 75%; margin-left: 10px">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span class="time hour">{{this.hora}}</span>
                <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">Placa {{placa}}
                    - Padron {{padron}}</span>


          </span>

                    <span class="pull-right">
            <div class="form-group" style="display: inline-block; margin-left: 10px">
                {{#if this.ida}}
                    <span style="display: inline-block; margin-left: 0px; color: blue">IDA</span>
                {{else}}
                    <span style="display: inline-block; margin-left: 0px; color: red">VUELTA</span>
                {{/if}}
            </div></span>
                </li>
            {{/each}}
        </div>
        <div id="menu2" class="tab-pane fade">
            <h3>Vehiculos en espera</h3>
            <br><br>
            {{#each despachocola}}
                <li class="list-group-item clearfix horario planeamiento">
          <span class="pull-left" style="width: 75%; margin-left: 10px">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span class="time hour">{{this.hora}}</span>
                <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">Placa {{placa}}
                    - Padron {{padron}}</span>


          </span>

                    <span class="pull-right">
            <div class="form-group" style="display: inline-block; margin-left: 10px">
                {{#if this.ida}}
                    <span style="display: inline-block; margin-left: 0px; color: blue">IDA</span>
                {{else}}
                    <span style="display: inline-block; margin-left: 0px; color: red">VUELTA</span>
                {{/if}}
            </div>
          </span>
                </li>
            {{/each}}
        </div>
        <div id="menu3" class="tab-pane fade">
            <h3>Vehiculos Sancionados</h3>
            <br><br>
            {{#each vehiculosSancionados}}
                <li class="list-group-item clearfix horario planeamiento">
          <span class="pull-left" style="width: 75%; margin-left: 10px">
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">Placa {{this.placa}} - Padron {{this.padron}}</span>
          </span>

                    <span class="pull-right">
            <div class="form-group" style="display: inline-block; margin-left: 10px">
              <!-- {{#if this.ida}}
              <span style="display: inline-block; margin-left: 0px; color: blue">IDA</span>
              {{else}}
              <span style="display: inline-block; margin-left: 0px; color: red">VUELTA</span>
              {{/if}} -->
            </div>
          </span>
                </li>
            {{else}}
                Aun no hay vehiculos sancionados.
            {{/each}}
        </div>
    </div>
</template>

<template name="SeleccionarRutaPlaneamiento">
    <div class="box">
        <h3>Seleccione una Ruta segun el Planeamiento de La Empresa {{empresa}}</h3>

        <br>
        <ul class="list-group">

            {{#each rutas}}
                <li class="list-group-item clearfix">
                    <span class="pull-left">{{this.nombre}} </span>
                    <span class="pull-right">

                          <a href="/despacho/d/{{this._id}}" class="btn btn-primary">
                            <i class="fa fa-eye" aria-hidden="true"></i>
                          </a>

                      </span>
                </li>

            {{else}}
                <h3>Lo sentimos no tenemos resultados de rutas para esta empresa</h3>
            {{/each}}



        </ul>

    </div>
</template>

<template name="Asignar">
    <div class="modal fade" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Asignar Cobrador / Conductor</h4>
                </div>

                <div class="modal-body">
                    <div class="page-header clearfix" style="margin-top: 0;">


                    </div>

                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#list_despacho">Conductor</a></li>
                        <li><a data-toggle="tab" href="#selectcobrador">Cobrador</a></li>
                        <li><a data-toggle="tab" href="#selectreq">Requisitos</a></li>
                    </ul>

                    <div class="tab-content">
                        <div id="list_despacho" class="tab-pane fade in active">
                            <div class="pull-left" style="width: 100%">
                                <input type="text" name="search" class="form-control"
                                       placeholder="Buscar conductor por nombre o DNI">
                            </div>
                            <br><br>
                            <br>
                            {{#if searching}}
                                <h3>Cargando...</h3>
                            {{else}}
                                <ul>
                                    {{#each conductores}}
                                        <li class="list-group-item clearfix horario planeamiento">
                        <span class="pull-left" style="width: 75%; margin-left: 10px">
                              <i class="fa fa-user" aria-hidden="true"></i>
                              <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">{{this.datos.nombre}} {{this.datos.apellido}}</span>
                        </span>
                                            <span class="pull-right">

                          <a href="#selectcobrador" class="despachar a{{this._id}} btn btn-success asignar-conductor">Asignar</a>

                        </span>
                                        </li>
                                    {{/each}}
                                </ul>
                            {{/if}}


                        </div>
                        <div id="selectcobrador" class="tab-pane fade">
                            <div class="pull-left" style="width: 100%">
                                <input type="text" name="search2" class="form-control"
                                       placeholder="Buscar cobrador por nombre o DNI">
                            </div>
                            <br><br>
                            <br>
                            {{#if searching2}}
                                <h3>Cargando...</h3>
                            {{else}}
                                {{#each cobradores}}
                                    <li class="list-group-item clearfix horario planeamiento">
                         <span class="pull-left" style="width: 75%; margin-left: 10px">
                               <i class="fa fa-user" aria-hidden="true"></i>
                               <span style="display: inline-block; margin-right: 30px; margin-left: 20px;">{{this.datos.nombre}} {{this.datos.apellido}}</span>
                         </span>
                                        <span class="pull-right">
                           <a href="#selectreq"
                              class="despachar c{{this._id}} btn btn-success asignar-cobrador">Asignar</a>

                         </span>
                                    </li>
                                {{else}}
                                    <p>No encontramos resultados para {{query2}}</p>
                                {{/each}}


                            {{/if}}
                        </div>
                        <div id="selectreq" class="tab-pane fade">
                            <h3>Requisitos</h3>
                            <br>
                            <ul>
                                {{#each requisitos}}
                                    <li class="list-group-item clearfix reqs">
                                        <span style="display: inline-block; margin-left: 20px;">{{this.nombre}}</span>
                                        <label style="display: inline-block; top: 9px; margin-left: 10px"
                                               class="switch">
                                            <input type="checkbox" id="req{{this._id}}" class="requisito">
                                            <div class="slider round"></div>
                                        </label>
                                    </li>
                                {{/each}}
                            </ul>
                            <br>
                            <button type="button" class="btn btn-primary cumple" {{despachar}}>Despachar</button>
                            <button type="button" class="btn btn-warning reasignar">Reasignar</button>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                </div>

            </div>
        </div>
    </div>
</template>
